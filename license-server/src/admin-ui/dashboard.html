<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>License Device Management</title>
    <style>
        body { margin: 0; font-family: Segoe UI, Tahoma, Arial, sans-serif; background: #020617; color: #e2e8f0; }
        .layout { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .topbar { display: flex; justify-content: space-between; align-items: center; gap: 12px; margin-bottom: 18px; }
        .title h1 { margin: 0; font-size: 22px; }
        .title p { margin: 4px 0 0; color: #94a3b8; font-size: 13px; }
        .btn { border: 0; border-radius: 8px; padding: 8px 12px; font-size: 13px; font-weight: 600; cursor: pointer; }
        .btn-primary { background: #2563eb; color: #fff; }
        .btn-danger { background: #dc2626; color: #fff; }
        .btn-muted { background: #334155; color: #e2e8f0; }
        .card { background: #0f172a; border: 1px solid #334155; border-radius: 12px; padding: 14px; margin-bottom: 14px; }
        .row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
        select, input { border: 1px solid #334155; background: #020617; color: #e2e8f0; border-radius: 8px; padding: 8px 10px; min-width: 240px; }
        table { width: 100%; border-collapse: collapse; font-size: 13px; }
        th, td { text-align: left; border-bottom: 1px solid #1e293b; padding: 8px 6px; }
        th { color: #94a3b8; font-weight: 600; }
        .status { display: inline-block; border-radius: 999px; padding: 3px 8px; font-size: 12px; text-transform: lowercase; }
        .status.approved { background: #064e3b; color: #a7f3d0; }
        .status.blocked { background: #78350f; color: #fde68a; }
        .status.revoked { background: #7f1d1d; color: #fecaca; }
        .message { min-height: 18px; color: #fda4af; font-size: 13px; margin-top: 8px; }
        .muted { color: #94a3b8; }
    </style>
</head>
<body>
    <div class="layout">
        <div class="topbar">
            <div class="title">
                <h1>Device Management</h1>
                <p>License-server admin only. Gym app users cannot access this panel.</p>
            </div>
            <div style="display:flex; gap:10px;">
                <a href="/admin/vendor-profile" class="btn btn-muted" style="text-decoration:none; display:inline-flex; align-items:center;">Vendor Profile</a>
                <button id="logoutBtn" class="btn btn-muted">Logout</button>
            </div>
        </div>

        <div class="card">
            <div class="row">
                <select id="licenseSelect"></select>
                <button id="refreshLicensesBtn" class="btn btn-primary">Refresh Licenses</button>
                <button id="resetDevicesBtn" class="btn btn-danger">Reset License Devices</button>
            </div>
            <div id="licenseStats" class="muted" style="margin-top: 8px;"></div>
            <div id="message" class="message"></div>
        </div>

        <div class="card" style="overflow-x: auto;">
            <table>
                <thead>
                    <tr>
                        <th>Device Name</th>
                        <th>Platform</th>
                        <th>App Version</th>
                        <th>First Activated</th>
                        <th>Last Seen</th>
                        <th>Last IP</th>
                        <th>Fingerprint</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="devicesBody">
                    <tr><td colspan="9" class="muted">Loading...</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <script src="/admin/static/dashboard.js"></script>
</body>
</html>
